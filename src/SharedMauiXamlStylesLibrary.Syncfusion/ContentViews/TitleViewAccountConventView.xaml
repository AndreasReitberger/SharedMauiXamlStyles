<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="AndreasReitberger.Shared.Syncfusion.ContentViews.TitleViewAccountConventView"
    
    xmlns:core="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core"
    xmlns:shared="clr-namespace:AndreasReitberger.Shared;assembly=SharedMauiXamlStylesLibrary"
    >
    <ContentView.Resources>
        <shared:SharedConverters />
    </ContentView.Resources>
    
    <ContentView.ControlTemplate>
        <ControlTemplate>
            <Grid
                Style="{StaticResource Style.Core.Grid.ShellTitleView}"
                IsVisible="{Binding Source={RelativeSource TemplatedParent}, Path=IsVisible}"
                IsEnabled="{Binding Source={RelativeSource TemplatedParent}, Path=IsEnabled}"
                Background="{Binding Source={RelativeSource TemplatedParent}, Path=Background}"
                HeightRequest="{Binding Source={RelativeSource TemplatedParent}, Path=HeightRequest}"
                ColumnDefinitions="*,Auto"
                >
                <ContentPresenter />
                <!--
                <Label
                    Style="{StaticResource Style.Core.Label.Shell}"
                    FormattedText="{Binding Source={RelativeSource TemplatedParent}, Path=TitleLabelFormattedString}"
                    Text="{Binding Source={RelativeSource TemplatedParent}, Path=TitleLabelText}"
                    />
                -->
                <Grid
                    Grid.Column="1"
                    IsVisible="{Binding Source={RelativeSource TemplatedParent}, Path=HideAccountArea, Converter={StaticResource BooleanReverseVisibilityConverter}}"
                    ColumnDefinitions="Auto,*"
                    >
                    <core:SfAvatarView
                        IsVisible="{Binding Source={RelativeSource TemplatedParent}, Path=IsLoggedIn}"
                        AvatarName="{Binding Source={RelativeSource TemplatedParent}, Path=UsernameText}"
                        ImageSource="{Binding Source={RelativeSource TemplatedParent}, Path=UserImage}"
                        Style="{StaticResource Style.Syncfusion.SfAvatarView.Initials}"
                        />
                    <Label
                        IsVisible="{Binding Source={RelativeSource TemplatedParent}, Path=IsLoggedIn}"
                        Grid.Column="1"
                        VerticalTextAlignment="Center"
                        HorizontalTextAlignment="Start"
                        FormattedText="{Binding Source={RelativeSource TemplatedParent}, Path=AccountLabelFormattedString}"
                        Text="{Binding Source={RelativeSource TemplatedParent}, Path=AccountLabelText}"
                        Style="{StaticResource Style.Core.Label.Header}"
                        >
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer
                                NumberOfTapsRequired="1"
                                Command="{Binding Source={RelativeSource TemplatedParent}, Path=AccountButtonCommand}"
                                />
                        </Label.GestureRecognizers>
                    </Label>
                    <Label
                        IsVisible="{Binding Source={RelativeSource TemplatedParent}, Path=IsLoggedIn, Converter={StaticResource BooleanReverseVisibilityConverter}}"
                        Grid.Column="1"
                        VerticalTextAlignment="Center"
                        HorizontalTextAlignment="Start"
                        FormattedText="{Binding Source={RelativeSource TemplatedParent}, Path=AuthLabelFormattedString}"
                        Text="{Binding Source={RelativeSource TemplatedParent}, Path=AuthLabelText}"
                        Style="{StaticResource Style.Core.Label.Header}"
                        >
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer
                                NumberOfTapsRequired="1"
                                Command="{Binding Source={RelativeSource TemplatedParent}, Path=AuthButtonCommand}"
                                />
                        </Label.GestureRecognizers>
                    </Label>
                </Grid>
            </Grid>
        </ControlTemplate>
    </ContentView.ControlTemplate>
</ContentView>
